"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[439],{3905:(e,t,o)=>{o.d(t,{Zo:()=>s,kt:()=>w});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var c=n.createContext({}),m=function(e){var t=n.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):p(p({},t),e)),o},s=function(e){var t=m(e.components);return n.createElement(c.Provider,{value:t},e.children)},l="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),l=m(o),d=a,w=l["".concat(c,".").concat(d)]||l[d]||u[d]||r;return o?n.createElement(w,p(p({ref:t},s),{},{components:o})):n.createElement(w,p({ref:t},s))}));function w(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,p=new Array(r);p[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[l]="string"==typeof e?e:a,p[1]=i;for(var m=2;m<r;m++)p[m]=o[m];return n.createElement.apply(null,p)}return n.createElement.apply(null,o)}d.displayName="MDXCreateElement"},5649:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>m});var n=o(7462),a=(o(7294),o(3905));const r={sidebar_position:1},p="Modyfikowanie template'u",i={unversionedId:"WooCommerce/misc",id:"WooCommerce/misc",title:"Modyfikowanie template'u",description:"Nale\u017cy doda\u0107 wsparcie dla WooCommerce w motywie.",source:"@site/docs/WooCommerce/misc.md",sourceDirName:"WooCommerce",slug:"/WooCommerce/misc",permalink:"/WLC-Good-Practices/en/WooCommerce/misc",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Internalizacja",permalink:"/WLC-Good-Practices/en/Standardy PHP/internalization"}},c={},m=[],s={toc:m},l="wrapper";function u(e){let{components:t,...r}=e;return(0,a.kt)(l,(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"modyfikowanie-templateu"},"Modyfikowanie template'u"),(0,a.kt)("p",null,"Nale\u017cy doda\u0107 wsparcie dla WooCommerce w motywie."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"add_action( 'after_setup_theme', 'woocommerce_support' );\nfunction woocommerce_support() {\nadd_theme_support( 'woocommerce' );\n}\n")),(0,a.kt)("p",null,"Modyfikuj\u0105c wygl\u0105d elelemntu WooCommerce, nale\u017cy skopiowa\u0107 tylko plik za to odpowiadaj\u0105cy do katalogu /woocommerce w katalogu motywu/motywu potomnego,\nnp"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"/plugins/woocommerce/templates/single-product/related.php")," do \u2192 ",(0,a.kt)("inlineCode",{parentName:"p"},"/themes/katalog_motywu/woocommerce/single-product/related.php")),(0,a.kt)("h1",{id:"formatowanie-ceny"},"Formatowanie ceny"),(0,a.kt)("p",null,"Nale\u017cy zawsze u\u017cywa\u0107 funkcji ",(0,a.kt)("a",{parentName:"p",href:"https://woocommerce.wp-a2z.org/oik_api/wc_price/"},"wc_price()")," oraz ",(0,a.kt)("a",{parentName:"p",href:"https://woocommerce.wp-a2z.org/oik_api/wc_format_sale_price/"},"wc_format_sale_price()")," posiadaj\u0105c cen\u0119 w formie zmiennej np. float lub integer, dzi\u0119ki temu zachowana zostanie sp\xf3jno\u015b\u0107 z formatowaniem w ca\u0142ym sklepie oraz mo\u017cliwe b\u0119dzie zmiana formatowania z poziomu ustawie\u0144 WooCommerce."),(0,a.kt)("h1",{id:"importowanie-produkt\xf3w"},"Importowanie produkt\xf3w"),(0,a.kt)("p",null,"Najefektywniejszym mechanizmem importowania produkt\xf3w jest funkcja ",(0,a.kt)("a",{parentName:"p",href:"https://developer.wordpress.org/reference/functions/wp_insert_post/"},"wp_insert_post()"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"wp_post_insert(\n    array(\n        'post_author'           => $user_id,\n        'post_content'          => '',\n        'post_content_filtered' => '',\n        'post_title'            => '',\n        'post_excerpt'          => '',\n        'post_status'           => 'draft',\n        'post_type'             => 'post',\n        'comment_status'        => '',\n        'ping_status'           => '',\n        'post_password'         => '',\n        'to_ping'               => '',\n        'pinged'                => '',\n        'post_parent'           => 0,\n        'menu_order'            => 0,\n        'guid'                  => '',\n        'import_id'             => 0,\n        'context'               => '',\n        'post_date'             => '',\n        'post_date_gmt'         => ''\n        'tax_input'    => array(),\n        'meta_input'   => array(),\n    )\n)\n")),(0,a.kt)("p",null,"Nale\u017cy stara\u0107 si\u0119 tworzy\u0107 post_meta (meta_input) i term (tax_input) na etapie tworzenie tego produktu."),(0,a.kt)("h1",{id:"cart_fragments"},"cart_fragments"),(0,a.kt)("p",null,'WooCommerce Cart Fragments to API zaprojektowane w celu zmniejszenia ilo\u015bci danych przesy\u0142anych mi\u0119dzy przegl\u0105darkami a serwerami podczas typowych sesji zakupowych np. od\u015bwie\u017canie koszyka.\nOdbywa si\u0119 to poprzez przechowywanie pewnych zmian w "fragmentach" - ma\u0142ych fragmentach danych \u2014 kt\xf3re s\u0105 nast\u0119pnie ponownie wysy\u0142ane do przegl\u0105darek w razie potrzeby, zamiast zmusza\u0107 je do ponownego za\u0142adowania ca\u0142ej strony.\nProces ten mo\u017ce poprawi\u0107 wydajno\u015b\u0107, zmniejszaj\u0105c obci\u0105\u017cenie serwera i op\xf3\u017anienia spowodowane prze\u0142adowaniem ca\u0142ej strony.'),(0,a.kt)("p",null,"Przyk\u0142adowe u\u017cycie \u2014 funkcja automatycznie aktualizuj\u0105ca ilo\u015b\u0107 produkt\xf3w w koszyku przy ikonie koszyka."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"add_filter( 'woocommerce_add_to_cart_fragments', array( $this, 'wc_refresh_mini_cart_count' ) );\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"public function wc_refresh_mini_cart_count( $fragments ) {\n  ob_start();\n  $this->mini_cart_counter();\n  $fragments['#count-products-cart'] = ob_get_clean();\n  return $fragments;\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"public function mini_cart_counter() {\n  $count = intval( WC()->cart->get_cart_contents_count() );\n  $class = 'counter';\n  if ( $count > 0 ) : \n    $class = $class . ' is-visible';\n  endif;\n  ?> \n  <span id=\"count-products-cart\" class=\"<?php echo esc_attr( $class ); ?>\">\n    <?php echo esc_html( $count );?>\n  </span>\n  <?php\n}\n")),(0,a.kt)("p",null,"Przy ikonce koszyka nale\u017cy doda\u0107: ",(0,a.kt)("inlineCode",{parentName:"p"},"$this->mini_cart_counter();"),"  - ta metoda odpowiada z wy\u015bwietlanie ilo\u015bci produkt\xf3w w koszyku.\nInne dost\u0119pne metody api:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wp-kama.com/plugin/woocommerce/hook/woocommerce_add_to_cart_fragments"},"woocommerce_add_to_cart_fragments"),","),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wp-kama.com/plugin/woocommerce/hook/woocommerce_add_to_cart_fragments"},"woocommerce_update_order_review_fragments"),","),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wp-kama.com/plugin/woocommerce/hook/woocommerce_update_order_review_fragments"},"woocommerce_update_order_review_fragments"),".")),(0,a.kt)("h1",{id:"reponsywno\u015b\u0107-koszyka"},"Reponsywno\u015b\u0107 koszyka"),(0,a.kt)("p",null,"Podstwowym problemem wyst\u0119puj\u0105cym w koszyku jest u\u017cycie tabelek, przez co jego widok nie jest mobilny i nie mo\u017ce by\u0107 responsywny.\nW tym wypadku nale\u017cy podmieni\u0107 ",(0,a.kt)("a",{target:"_blank",href:o(3991).Z},"plik cart")," w katalogu katalog_motywu/woocommerce/cart/cart.php"))}u.isMDXComponent=!0},3991:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/files/cart-7057f581c27e447f292450be687969b2.php"}}]);